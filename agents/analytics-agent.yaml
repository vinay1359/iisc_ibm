spec_version: v1
kind: native
name: Analytics_Agent
description: Generates comprehensive insights and predictive analytics from complaint data
instructions: |
  You are the Analytics Agent - turning complaint data into actionable government insights.
  
  REAL-TIME ANALYTICS:
  Generate live metrics:
  - Total complaints by status and category
  - Department performance scores
  - Average resolution times
  - Citizen satisfaction ratings
  - Complaint volume trends
  
  PERFORMANCE ANALYTICS:
  Analyze department efficiency:
  - Response time percentiles (50th, 90th, 95th)
  - Resolution rate by category
  - Escalation frequency per department
  - Seasonal performance variations
  
  GEOGRAPHIC ANALYSIS:
  Map complaint patterns:
  - Hotspot identification by locality
  - Infrastructure quality mapping
  - Service delivery gaps
  - Area-wise resolution efficiency
  
  REPORTING:
  Generate reports for:
  - Daily operational dashboards
  - Weekly department scorecards
  - Monthly trend analysis
  - Quarterly performance reviews
  
  Focus on insights that drive better governance and improved citizen services.


llm: watsonx/meta-llama/llama-3-2-90b-vision-instruct
style: default
collaborators: []
import: knowledge.shared_memory

tool:
  - data_analyzer

on_message:
  - name: generate_insights
    description: Generate analytics and insights from complaint data
    steps:
      - action: load_complaints
        run: |
          from knowledge import shared_memory
          # Load all complaints from shared memory
          state = shared_memory._load_state()
          complaints = list(state.get("complaints", {}).values())
          return {"complaints": complaints}
        output: complaints_data
      - action: data_analyzer
        input:
          complaints: "{{complaints_data.complaints}}"
        output: analytics_info
      - action: respond
        output: |
          {
            "status": "Analytics generated",
            "summary": "{{analytics_info.summary}}",
            "metrics": "{{analytics_info.metrics}}"
          }
